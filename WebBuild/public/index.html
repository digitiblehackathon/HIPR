<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>HIPR</title>
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link rel="stylesheet" href="stylesheets/style.css">
        
    <script>
    	window.addEventListener('load', async () => {
            document.getElementById("playButton").addEventListener('click', async () => {
                // Modern dapp browsers...
                if (window.ethereum) {
                    window.web3 = new Web3(ethereum);
                    try {
                        // Request account access if needed
                        await ethereum.enable();
						// Acccounts now exposed
                        OnCheckingDone();
                    } 
                    catch (error) {
						console.log(error);
                        OnError("User denied access to Metamask for this app");
						document.getElementById("errorText").style.visibility = "visible";
                    }
                }
                // Legacy dapp browsers...
                else if (window.web3) {
                    window.web3 = new Web3(web3.currentProvider);
                    // Acccounts always exposed
                    OnCheckingDone();
                }
                // Non-dapp browsers...
                else {
					OnError('Non-Ethereum browser detected. You should consider trying MetaMask!');
					document.getElementById("noWeb3Error").style.visibility = "visible";
                }
            });
        });

    	function OnCheckingDone()
    	{
    		if(typeof(window.web3.eth.accounts[0]) == 'undefined')
    		{
    			OnError("Please log into Metamask to play on HIPR.");
				document.getElementById("errorText").style.visibility = "visible";
				document.getElementById("noWeb3Error").style.visibility = "visible";
    		}
    		else
    		{     
				window.location.href = "/validate";         
				/*window.web3.eth.getBalance(window.web3.eth.accounts[0], function(error, balance) {
					let weiBalance = window.web3.fromWei(balance);
					console.log(weiBalance); 
					if(weiBalance.c[1] >= 20000000000)
						window.location.href = "/validate";
					else
						OnError("It seems you do not have enough ETH to submit your score. Your scores would not be submitted without the fuel of the Ethereum blockchain.");
            			document.getElementById("errorText").style.visibility = "visible";
				});*/
    		}
    	}

    	function OnError(message)
    	{
			console.log(message);
			document.getElementById("errorText").innerHTML = message;
            document.getElementById("web3Error").style.visibility = "visible";
    	}

    </script>

</head>
<body style="background: rgb(35, 31, 32);">
    <div id="errorPage">
        <div class="container grid-lg errorContainer">
            <div class="columns">
                <div class="column col-5 col-xl-12">
                    <div class="column col-12 text-center">
                        <h2>Human Initiated Performance Report</h2>
                    </div>
                    <div class="column col-12 text-center">
                        <img class="img-responsive hiprLogo" src="images/hipr_logo_loop.gif" />
                    </div>
                    <div class="columns">
                        <div class="column col-12 buttonsContainer text-center">
							<a id="playButton" class="playButton text-center" href="#"><img class="img-responsive" style="margin:auto;" src="images/PlayButton.png" /></a>
                        </div>
                        <!--<div class="column col-6">
                            <a class="infoButton float-left" href="https://herc.one/metamask" target="_blank"><img class="img-responsive" src="images/InfoButton.png" style="height: 50px" /></a>
                        </div>-->
					</div>
					<div id="web3Error">
						<p id="errorText" style="color:red; margin-bottom:0;text-align:center;visibility: hidden"></p>
						<div class="noWeb3Error" style="visibility: hidden">
							<div class="column col-12 text-center dapp-error-text">
								<p>HIPR requires a dApp browser to work. <a href="https://herc.one/metamask" target="_blank">Learn more.</a></p>
								<p class="small-description">Try from these web3 providers:</p>
							</div>
							<div class="columns" style="max-width: 600px; margin: auto;">
								<div class="column col-3 text-center">
									<a href="https://wallet.coinbase.com/">
										<img class="img-responsive wallet-icon" src="images/logos/coinbase.png" />
									</a>
								</div>
								<div class="column col-3 text-center">
									<a href="https://trustwallet.com/">
										<img class="img-responsive wallet-icon" src="images/logos/trust.png" />
									</a>
								</div>
								<div class="column col-3 text-center">
									<a href="https://www.opera.com/it/crypto">
										<img class="img-responsive wallet-icon" src="images/logos/opera.png" />
									</a>
								</div>
								<div class="column col-3 text-center">
									<a href="https://metamask.io/">
										<img class="img-responsive wallet-icon" src="images/logos/metamask.png" />
									</a>
								</div>
							</div>
						</div>
					</div>
                </div>
                <div class="column col-7 col-xl-12">
                    <div class="column col-12 description text-center description-2">
                        The first ever gamified "Internal Review" function; wheras the software validates the integrity of the HERC Protocol Supply Chain data and secures the network through human initiation of smart contract checksums.
                    </div>
                    <div class="column col-12">
						<!--<img class="img-responsive puzzleImage" src="images/puzzle.png" />-->
						<video controls width="100%" heigh="100%" style="margin-top: 5rem;">
							<source src="media/HIPR_ShortVid_v4.mp4" type="video/mp4">
						</video>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
